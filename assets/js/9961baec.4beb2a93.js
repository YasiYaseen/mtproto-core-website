(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{85:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return n})),o.d(t,"metadata",(function(){return c})),o.d(t,"toc",(function(){return i})),o.d(t,"default",(function(){return m}));var s=o(3),a=o(7),r=(o(0),o(100)),n={title:"Custom Storage"},c={unversionedId:"custom-storage",id:"custom-storage",isDocsHomePage:!1,title:"Custom Storage",description:"Why do I need storage?",source:"@site/docs/custom-storage.md",slug:"/custom-storage",permalink:"/mtproto-core-website/docs/custom-storage",editUrl:"https://github.com/alik0211/mtproto-core-website/edit/master/docs/custom-storage.md",version:"current",sidebar:"docs",previous:{title:"Call The Telegram Methods",permalink:"/mtproto-core-website/docs/call-the-telegram-methods"},next:{title:"Test Phone Numbers",permalink:"/mtproto-core-website/docs/test-phone-numbers"}},i=[{value:"Why do I need storage?",id:"why-do-i-need-storage",children:[]},{value:"How to make your own custom storage?",id:"how-to-make-your-own-custom-storage",children:[{value:"1. Create",id:"1-create",children:[]},{value:"2. Use",id:"2-use",children:[]}]},{value:"Ready-made storages",id:"ready-made-storages",children:[]}],d={toc:i};function m(e){var t=e.components,o=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(s.a)({},d,o,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"why-do-i-need-storage"},"Why do I need storage?"),Object(r.b)("p",null,"The storage is used to store the session (authentication keys, server salts and time offset)"),Object(r.b)("h2",{id:"how-to-make-your-own-custom-storage"},"How to make your own custom storage?"),Object(r.b)("h3",{id:"1-create"},"1. Create"),Object(r.b)("p",null,"It's easy. The custom storage ",Object(r.b)("strong",{parentName:"p"},"must")," follow this API:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-ts"},"class CustomStorage {\n  set(key: string, value: string): Promise<void>;\n  get(key: string): Promise<string|null>;\n}\n")),Object(r.b)("p",null,"Examples can be found in the ",Object(r.b)("a",{parentName:"p",href:"#ready-made-storages"},"last section")),Object(r.b)("h3",{id:"2-use"},"2. Use"),Object(r.b)("p",null,"Create an instance of the custom storage and pass it to ",Object(r.b)("inlineCode",{parentName:"p"},"storageOptions.instance"),":"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"const instance = new CustomStorage();\n\nnew MTProto({\n  storageOptions: {\n    instance,\n  },\n});\n")),Object(r.b)("h2",{id:"ready-made-storages"},"Ready-made storages"),Object(r.b)("p",null,"The library includes ready-made storages:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"https://github.com/alik0211/mtproto-core/blob/master/src/storage/temp/index.js"},"tempStorage")," only stores data while the script is running")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"const tempStorage = require('@mtproto/core/src/storage/temp');\n\nnew MTProto({\n  storageOptions: {\n    instance: tempStorage,\n  },\n});\n")))}m.isMDXComponent=!0}}]);